#include <iostream>
#include <ctime>
#include <string>

using namespace std;

class Battle {
public:
    void attacker();
    void defender();
};

void Battle::attacker() {
    int move;
    cout << "You're The Attacker\n";
    cout << "Press 1. Attack\nPress 2.Weapon Skill\nPress 3. Ultimate\nPress 4.Leave \n";
    while(true){
        cin >> move;
        switch (move) {
            case 1:
                cout << "You chose to Attack!\n";
                break;
            case 2:
                cout << "You used a Weapon SKill!\n";
                break;
            case 3:
                cout << "Ultimate Move Activated!\n";
                break;
            case 4:
                cout << "You leave...\n";
                break;
            default:
                cout << "Invalid choice. Try again.\n";
                continue;
        }
    }
}

void Battle::defender() {
    int move;
    cout << "You're The Defender\n";
    cout << "Press 1.Block(against Attack)\nPress 2.Dodge(against Weapon SKill)\nPress 3.Parry(against ultimate)\nPress 4. Give up\n";
    while(true){
        cin >> move;
        switch (move) {
            case 1:
                cout << "You Try to Block An Attack!\n";
                break;
            case 2:
                cout << "You try to Dodge!\n";
                break;
            case 3:
                cout << "You try to parry!\n";
                break;
            case 4:
                cout << "You gave up...\n";
                break;
            default:
                cout << "Invalid choice. Try again.\n";
                continue;
        }
    }

}

int main() {
    srand(time(0));
    int rcoin = rand() % 2, coin = 2;
    string scoin;
    
    // ให้ผู้เล่นเลือก หัว หรือ ก้อย
    do {
        cout << "Pick head or tail: ";
        cin >> scoin;
        if (scoin == "head") coin = 0;
        else if (scoin == "tail") coin = 1;
        else cout << "Error. Try Again\n";
    } while (coin == 2);

    // เริ่มการต่อสู้
    Battle battle;
    int round = 1;

    while (true) {
        cout << "Round: " << round << endl;
        if (coin == rcoin) {
            battle.attacker();
            battle.defender();
        } else {
            battle.defender();
            battle.attacker();
        }

        round++;
        cout << "------------------\n";
    }

    return 0;
}
