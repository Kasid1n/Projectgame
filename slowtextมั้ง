#include <chrono>
#include <thread>
#include <iostream>
using namespace std;
using namespace chrono;
using namespace this_thread;

struct slowly_printing_string {string data; long int delay; };

ostream& operator<<(ostream& out, const slowly_printing_string& s) {
    int count = 0;
    for (const auto& c : s.data) {
        out << c << flush;        
        sleep_for(milliseconds(s.delay));
        count++;

        if (count % 20 == 0) {
            out << '\n';
        }
    }
    return out;
}

int main() {
    cout << slowly_printing_string{ "hallo world! This is a test string to check line breaking.", 100 };
}
